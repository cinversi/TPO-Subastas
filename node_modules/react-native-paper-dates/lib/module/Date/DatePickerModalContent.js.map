{"version":3,"sources":["DatePickerModalContent.tsx"],"names":["React","Calendar","AnimatedCrossView","DatePickerModalHeader","DatePickerModalContentHeader","CalendarEdit","DatePickerModalHeaderBackground","DatePickerModalContent","props","mode","onChange","onConfirm","onDismiss","disableSafeTop","disableWeekDays","locale","validRange","anyProps","state","setState","useState","date","startDate","endDate","dates","useEffect","collapsed","setCollapsed","onInnerChange","useCallback","params","prev","onInnerConfirm","onToggleCollapse","saveLabel","headerSeparator","emptyLabel","label","moreLabel","startLabel","endLabel","memo"],"mappings":"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","sourcesContent":["import * as React from 'react'\n\nimport Calendar, {\n  BaseCalendarProps,\n  CalendarDate,\n  CalendarDates,\n  MultiChange,\n  MultiConfirm,\n  RangeChange,\n  SingleChange,\n} from './Calendar'\n\nimport AnimatedCrossView from './AnimatedCrossView'\n\nimport DatePickerModalHeader from './DatePickerModalHeader'\nimport DatePickerModalContentHeader, {\n  HeaderPickProps,\n} from './DatePickerModalContentHeader'\nimport CalendarEdit from './CalendarEdit'\nimport DatePickerModalHeaderBackground from './DatePickerModalHeaderBackground'\n\nexport type LocalState = {\n  startDate: CalendarDate\n  endDate: CalendarDate\n  date: CalendarDate\n  dates: CalendarDates\n}\n\ninterface DatePickerModalContentBaseProps {\n  inputFormat?: string\n  locale?: undefined | string\n  onDismiss: () => any\n  disableSafeTop?: boolean\n}\n\nexport interface DatePickerModalContentRangeProps\n  extends HeaderPickProps,\n    BaseCalendarProps,\n    DatePickerModalContentBaseProps {\n  mode: 'range'\n  startDate: CalendarDate\n  endDate: CalendarDate\n  onChange?: RangeChange\n  onConfirm: RangeChange\n}\n\nexport interface DatePickerModalContentSingleProps\n  extends HeaderPickProps,\n    BaseCalendarProps,\n    DatePickerModalContentBaseProps {\n  mode: 'single'\n  date?: CalendarDate\n  onChange?: SingleChange\n  onConfirm: SingleChange\n}\n\nexport interface DatePickerModalContentMultiProps\n  extends HeaderPickProps,\n    BaseCalendarProps,\n    DatePickerModalContentBaseProps {\n  mode: 'multiple'\n  dates?: CalendarDates\n  onChange?: MultiChange\n  onConfirm: MultiConfirm\n}\n\nexport function DatePickerModalContent(\n  props:\n    | DatePickerModalContentRangeProps\n    | DatePickerModalContentSingleProps\n    | DatePickerModalContentMultiProps\n) {\n  const {\n    mode,\n    onChange,\n    onConfirm,\n    onDismiss,\n    disableSafeTop,\n    disableWeekDays,\n    locale,\n    validRange,\n  } = props\n\n  const anyProps = props as any\n\n  // use local state to add only onConfirm state changes\n  const [state, setState] = React.useState<LocalState>({\n    date: anyProps.date,\n    startDate: anyProps.startDate,\n    endDate: anyProps.endDate,\n    dates: anyProps.dates,\n  })\n\n  // update local state if changed from outside or if modal is opened\n  React.useEffect(() => {\n    setState({\n      date: anyProps.date,\n      startDate: anyProps.startDate,\n      endDate: anyProps.endDate,\n      dates: anyProps.dates,\n    })\n  }, [anyProps.date, anyProps.startDate, anyProps.endDate, anyProps.dates])\n\n  const [collapsed, setCollapsed] = React.useState<boolean>(true)\n\n  const onInnerChange = React.useCallback(\n    (params) => {\n      onChange && onChange(params)\n      setState((prev) => ({ ...prev, ...params }))\n    },\n    [onChange, setState]\n  )\n\n  const onInnerConfirm = React.useCallback(() => {\n    if (mode === 'single') {\n      ;(onConfirm as DatePickerModalContentSingleProps['onConfirm'])({\n        date: state.date,\n      })\n    } else if (mode === 'range') {\n      ;(onConfirm as DatePickerModalContentRangeProps['onConfirm'])({\n        startDate: state.startDate,\n        endDate: state.endDate,\n      })\n    } else if (mode === 'multiple') {\n      ;(onConfirm as DatePickerModalContentMultiProps['onConfirm'])({\n        dates: state.dates || [],\n      })\n    }\n  }, [state, mode, onConfirm])\n\n  const onToggleCollapse = React.useCallback(() => {\n    setCollapsed((prev) => !prev)\n  }, [setCollapsed])\n\n  return (\n    <>\n      <DatePickerModalHeaderBackground>\n        <DatePickerModalHeader\n          onSave={onInnerConfirm}\n          onDismiss={onDismiss}\n          saveLabel={props.saveLabel}\n          disableSafeTop={disableSafeTop}\n        />\n        <DatePickerModalContentHeader\n          state={state}\n          mode={mode}\n          collapsed={collapsed}\n          onToggle={onToggleCollapse}\n          headerSeparator={props.headerSeparator}\n          emptyLabel={props.emptyLabel}\n          label={props.label}\n          moreLabel={props.moreLabel}\n          startLabel={props.startLabel}\n          endLabel={props.endLabel}\n          locale={locale}\n        />\n      </DatePickerModalHeaderBackground>\n\n      <AnimatedCrossView\n        collapsed={collapsed}\n        calendar={\n          <Calendar\n            locale={locale}\n            mode={mode}\n            startDate={state.startDate}\n            endDate={state.endDate}\n            date={state.date}\n            onChange={onInnerChange}\n            disableWeekDays={disableWeekDays}\n            dates={state.dates}\n            validRange={validRange}\n          />\n        }\n        calendarEdit={\n          <CalendarEdit\n            mode={mode}\n            state={state}\n            label={props.label}\n            startLabel={props.startLabel}\n            endLabel={props.endLabel}\n            collapsed={collapsed}\n            onChange={onInnerChange}\n            validRange={validRange}\n            locale={locale}\n          />\n        }\n      />\n    </>\n  )\n}\n\nexport default React.memo(DatePickerModalContent)\n"]}